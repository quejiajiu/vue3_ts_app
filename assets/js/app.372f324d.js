(function(){"use strict";var e={4289:function(e,t,n){var i=n(9242),a=n(3396);function r(e,t){const n=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(n)}var s=n(89);const o={},l=(0,s.Z)(o,[["render",r]]);var u=l,c=n(2483);const p=e=>((0,a.dD)("data-v-4361be5b"),e=e(),(0,a.Cn)(),e),d={class:"ub ub-ver home"},m={class:"search"},f={class:"topListBox"},v=p((()=>(0,a._)("span",null,"Recommend",-1))),g={class:"ub-f1 appListBox"};function b(e,t,n,i,r,s){const o=(0,a.up)("van-search"),l=(0,a.up)("topList"),u=(0,a.up)("appList");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",m,[(0,a.Wm)(o,{class:"input",modelValue:i.searchValue,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchValue=e),placeholder:"Search...",shape:"round"},null,8,["modelValue"])]),(0,a._)("div",f,[v,(0,a.Wm)(l,{list:i.topAppList},null,8,["list"])]),(0,a._)("div",g,[(0,a.Wm)(u,{list:i.mainList},null,8,["list"])])])}var h=n(4870),y=n(7139);const w={class:"topList"},k=["onClick"],_={class:"ub ub-pc name"},O={class:"ub ub-pc type"};function L(e,t,n,i,r,s){const o=(0,a.up)("van-loading"),l=(0,a.up)("van-image");return(0,a.wg)(),(0,a.iD)("div",w,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"ub ub-ver item",key:t},[(0,a._)("div",{class:"ub ub-pc img",onClick:t=>i.linkFn(e)},[(0,a.Wm)(l,{src:e.icon,radius:"10"},{loading:(0,a.w5)((()=>[(0,a.Wm)(o,{type:"spinner",size:"20"})])),_:2},1032,["src"])],8,k),(0,a._)("div",_,(0,y.zw)(e.name),1),(0,a._)("div",O,(0,y.zw)(e.type),1)])))),128))])}var j={props:{list:{type:Array,default:()=>[]}},setup(){function e(e){e.link&&(window.location.href=e.link)}return{linkFn:e}}};const S=(0,s.Z)(j,[["render",L],["__scopeId","data-v-8c936eba"]]);var P=S;const C={class:"appList"},J={class:"ub ub-ac num"},z=["onClick"],D={class:"ub ub-ver ub-f1 text"},N={class:"ub name"},T={class:"ub type"},V={class:"ub rate"};function x(e,t,n,i,r,s){const o=(0,a.up)("van-loading"),l=(0,a.up)("van-image"),u=(0,a.up)("van-rate");return(0,a.wg)(),(0,a.iD)("div",C,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"ub item",key:t},[(0,a._)("div",J,(0,y.zw)(t+1),1),(0,a._)("div",{class:"ub ub-pc img",onClick:t=>i.linkFn(e)},[(0,a.Wm)(l,{src:e.icon,radius:t%2===1?60:0},{loading:(0,a.w5)((()=>[(0,a.Wm)(o,{type:"spinner",size:"20"})])),_:2},1032,["src","radius"])],8,z),(0,a._)("div",D,[(0,a._)("div",N,(0,y.zw)(e.name),1),(0,a._)("div",T,(0,y.zw)(e.type),1),(0,a._)("div",V,[(0,a.Wm)(u,{modelValue:e.name.length,"onUpdate:modelValue":t=>e.name.length=t,size:12,color:"#ffd21e","void-icon":"star","void-color":"#eee",readonly:""},null,8,["modelValue","onUpdate:modelValue"]),(0,a._)("span",null,"("+(0,y.zw)(e.comments)+")",1)])])])))),128))])}var F={props:{list:{type:Array,default:()=>[]}},setup(){function e(e){e.link&&(window.location.href=e.link)}return{linkFn:e}}};const W=(0,s.Z)(F,[["render",x],["__scopeId","data-v-2319d999"]]);var $=W,I=n(2482);class A{constructor(){(0,I.Z)(this,"use",((e,t,n=!1)=>{let i;return(...a)=>{if(n)return e.apply(this,a),void(n=!1);clearTimeout(i),i=setTimeout((()=>{e.apply(this,a)}),t)}}))}}var H=n(773),Z={name:"home",components:{topList:P,appList:$},props:[],setup(e){const t=(0,h.iH)(""),n=(0,h.iH)([]),i=(0,h.iH)([]);let r=[],s=(new A).use(o,400);function o(e){i.value=""==e?r:r.filter((t=>{const n=t.title+t.name+t.rights+t.summary;return-1!==n.indexOf(e)}))}(0,a.YP)(t,(e=>{s(e)}));const l=(0,a.FN)(),{$api:u}=l.appContext.config.globalProperties;function c(e){return console.log(e[0]),e.map((e=>{let t=e["im:image"][0]?.label;return{title:e.title?.label,rights:e.rights?.label,name:e["im:name"]?.label,summary:e.summary?.label,type:e.category?.attributes?.label,icon:t,comments:e.id?.attributes["im:id"],link:e.link[0]?.attributes?.href}}))}async function p(){await u.getData("6017");return!0}async function d(){var e=await u.topgrossingapplications(10);if(e){let t=e.feed?.entry,i=c(t);n.value=JSON.parse(JSON.stringify(i)),localStorage.setItem("topAppList",JSON.stringify(i))}else{let e=localStorage.getItem("topAppList");if(e)try{n.value=JSON.parse(e)}catch(t){}}return!0}async function m(){var e=await u.topfreeapplications(100);if(e){let t=e.feed?.entry,n=c(t);r=JSON.parse(JSON.stringify(n)),i.value=r,localStorage.setItem("appMainList",JSON.stringify(n))}else{let e=localStorage.getItem("appMainList");if(e)try{r=JSON.parse(e),i.value=JSON.parse(e)}catch(t){}}return!0}function f(){H.F.loading({message:"加载中...",forbidClick:!1,duration:1e4,loadingType:"spinner"}),Promise.all([d(),m(),p()]).then((()=>{H.F.clear()}))}return f(),{searchValue:t,topAppList:n,mainList:i}}};const M=(0,s.Z)(Z,[["render",b],["__scopeId","data-v-4361be5b"]]);var U=M;const E=[{path:"/",name:"home",component:U}],Y=(0,c.p7)({history:(0,c.PO)(""),routes:E});var B=Y,K=n(65),q=(0,K.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}}),R=(n(1552),n(316)),G=n(6481),Q=n(2229),X=n(9545),ee=n(9939),te=n(3),ne=n(1738);const ie=[R.J,G.o,Q.g,X.z,ee.j,te.E,ne.J],ae={install:e=>{ie.forEach((t=>e.component(t.name,t)))}};n(7150);var re=n(6265),se=n.n(re);const oe=e=>{switch(e){case 401:alert("401");break;default:}},le=se().create({timeout:3e4});le.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",le.interceptors.request.use((e=>(e.cancelToken=new(se().CancelToken)((e=>{})),e)),(e=>Promise.reject(e))),le.interceptors.response.use((e=>{if(200===e.status){const{code:t,msg:n}=e.data;return 1===t||oe(t),Promise.resolve(e.data)}return Promise.reject(e)}),(e=>{const{response:t,message:n,msg:i}=e;return t?(oe(t.status),Promise.resolve(t.data)):"cancel"!==n&&"cancel"!==i?Promise.reject({msg:"网络错误"}):void 0}));var ue=le;const ce="https://itunes.apple.com/",pe={getData(e){return ue.get(`${ce}hk/lookup?id=${e}`)},topgrossingapplications(e){return ue.get(`${ce}hk/rss/topgrossingapplications/limit=${e}/json`)},topfreeapplications(e){return ue.get(`${ce}hk/rss/topfreeapplications/limit=${e}/json`)}};var de=pe;const me=(0,i.ri)(u);me.config.globalProperties.$api=de,ae.install(me),me.use(q).use(B).mount("#app")}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,i,a,r){if(!i){var s=1/0;for(c=0;c<e.length;c++){i=e[c][0],a=e[c][1],r=e[c][2];for(var o=!0,l=0;l<i.length;l++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(o=!1,r<s&&(s=r));if(o){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[i,a,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,r,s=i[0],o=i[1],l=i[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)var c=l(n)}for(t&&t(i);u<s.length;u++)r=s[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},i=self["webpackChunkvue_ts_app"]=self["webpackChunkvue_ts_app"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(4289)}));i=n.O(i)})();