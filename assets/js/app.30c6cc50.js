(function(){"use strict";var e={3836:function(e,t,n){var a=n(9242),i=n(3396);function r(e,t){const n=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(n)}var s=n(89);const o={},l=(0,s.Z)(o,[["render",r]]);var u=l,c=n(2483);const p=e=>((0,i.dD)("data-v-4361be5b"),e=e(),(0,i.Cn)(),e),d={class:"ub ub-ver home"},m={class:"search"},f={class:"topListBox"},v=p((()=>(0,i._)("span",null,"Recommend",-1))),g={class:"ub-f1 appListBox"};function b(e,t,n,a,r,s){const o=(0,i.up)("van-search"),l=(0,i.up)("topList"),u=(0,i.up)("appList");return(0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("div",m,[(0,i.Wm)(o,{class:"input",modelValue:a.searchValue,"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchValue=e),placeholder:"Search...",shape:"round"},null,8,["modelValue"])]),(0,i._)("div",f,[v,(0,i.Wm)(l,{list:a.topAppList},null,8,["list"])]),(0,i._)("div",g,[(0,i.Wm)(u,{list:a.mainList},null,8,["list"])])])}var h=n(4870),y=n(7139);const w={class:"topList"},_=["onClick"],k={class:"name"},O={class:"ub ub-pc type"};function L(e,t,n,a,r,s){const o=(0,i.up)("van-loading"),l=(0,i.up)("van-image");return(0,i.wg)(),(0,i.iD)("div",w,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.list,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"ub ub-ver item",key:t},[(0,i._)("div",{class:"ub ub-pc img",onClick:t=>a.linkFn(e)},[(0,i.Wm)(l,{src:e.icon,radius:"10"},{loading:(0,i.w5)((()=>[(0,i.Wm)(o,{type:"spinner",size:"20"})])),_:2},1032,["src"])],8,_),(0,i._)("div",k,(0,y.zw)(e.name),1),(0,i._)("div",O,(0,y.zw)(e.type),1)])))),128))])}var j={props:{list:{type:Array,default:()=>[]}},setup(){function e(e){e.link&&(window.location.href=e.link)}return{linkFn:e}}};const S=(0,s.Z)(j,[["render",L],["__scopeId","data-v-1502a158"]]);var P=S;const C={class:"appList"},J={class:"ub ub-ac num"},z=["onClick"],D={class:"ub ub-ver ub-f1 text"},N={class:"ub name"},T={class:"ub type"},V={class:"ub rate"};function x(e,t,n,a,r,s){const o=(0,i.up)("van-loading"),l=(0,i.up)("van-image"),u=(0,i.up)("van-rate");return(0,i.wg)(),(0,i.iD)("div",C,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.list,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"ub item",key:t},[(0,i._)("div",J,(0,y.zw)(t+1),1),(0,i._)("div",{class:"ub ub-pc img",onClick:t=>a.linkFn(e)},[(0,i.Wm)(l,{src:e.icon,radius:t%2===1?60:0},{loading:(0,i.w5)((()=>[(0,i.Wm)(o,{type:"spinner",size:"20"})])),_:2},1032,["src","radius"])],8,z),(0,i._)("div",D,[(0,i._)("div",N,(0,y.zw)(e.name),1),(0,i._)("div",T,(0,y.zw)(e.type),1),(0,i._)("div",V,[(0,i.Wm)(u,{modelValue:e.name.length,"onUpdate:modelValue":t=>e.name.length=t,size:12,color:"#ffd21e","void-icon":"star","void-color":"#eee",readonly:""},null,8,["modelValue","onUpdate:modelValue"]),(0,i._)("span",null,"("+(0,y.zw)(e.comments)+")",1)])])])))),128))])}var F={props:{list:{type:Array,default:()=>[]}},setup(){function e(e){e.link&&(window.location.href=e.link)}return{linkFn:e}}};const W=(0,s.Z)(F,[["render",x],["__scopeId","data-v-2319d999"]]);var $=W,I=n(2482);class A{constructor(){(0,I.Z)(this,"use",((e,t,n=!1)=>{let a;return(...i)=>{if(n)return e.apply(this,i),void(n=!1);clearTimeout(a),a=setTimeout((()=>{e.apply(this,i)}),t)}}))}}var H=n(773),Z={name:"home",components:{topList:P,appList:$},props:[],setup(e){const t=(0,h.iH)(""),n=(0,h.iH)([]),a=(0,h.iH)([]);let r=[],s=(new A).use(o,400);function o(e){a.value=""==e?r:r.filter((t=>{const n=t.title+t.name+t.rights+t.summary;return-1!==n.indexOf(e)}))}(0,i.YP)(t,(e=>{s(e)}));const l=(0,i.FN)(),{$api:u}=l.appContext.config.globalProperties;function c(e){return console.log(e[0]),e.map((e=>{let t=e["im:image"][0]?.label;return{title:e.title?.label,rights:e.rights?.label,name:e["im:name"]?.label,summary:e.summary?.label,type:e.category?.attributes?.label,icon:t,comments:e.id?.attributes["im:id"],link:e.link[0]?.attributes?.href}}))}async function p(){await u.getData("6017");return!0}async function d(){var e=await u.topgrossingapplications(10);if(e){let t=e.feed?.entry,a=c(t);n.value=JSON.parse(JSON.stringify(a)),localStorage.setItem("topAppList",JSON.stringify(a))}else{let e=localStorage.getItem("topAppList");if(e)try{n.value=JSON.parse(e)}catch(t){}}return!0}async function m(){var e=await u.topfreeapplications(100);if(e){let t=e.feed?.entry,n=c(t);r=JSON.parse(JSON.stringify(n)),a.value=r,localStorage.setItem("appMainList",JSON.stringify(n))}else{let e=localStorage.getItem("appMainList");if(e)try{r=JSON.parse(e),a.value=JSON.parse(e)}catch(t){}}return!0}function f(){H.F.loading({message:"加载中...",forbidClick:!1,duration:1e4,loadingType:"spinner"}),Promise.all([d(),m(),p()]).then((()=>{H.F.clear()}))}return f(),{searchValue:t,topAppList:n,mainList:a}}};const M=(0,s.Z)(Z,[["render",b],["__scopeId","data-v-4361be5b"]]);var U=M;const E=[{path:"/",name:"home",component:U}],Y=(0,c.p7)({history:(0,c.PO)("/vue3_ts_app/"),routes:E});var B=Y,K=n(65),q=(0,K.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}}),R=(n(1552),n(316)),G=n(6481),Q=n(2229),X=n(9545),ee=n(9939),te=n(3),ne=n(1738);const ae=[R.J,G.o,Q.g,X.z,ee.j,te.E,ne.J],ie={install:e=>{ae.forEach((t=>e.component(t.name,t)))}};n(7150);var re=n(6265),se=n.n(re);const oe=e=>{switch(e){case 401:alert("401");break;default:}},le=se().create({timeout:3e4});le.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",le.interceptors.request.use((e=>(e.cancelToken=new(se().CancelToken)((e=>{})),e)),(e=>Promise.reject(e))),le.interceptors.response.use((e=>{if(200===e.status){const{code:t,msg:n}=e.data;return 1===t||oe(t),Promise.resolve(e.data)}return Promise.reject(e)}),(e=>{const{response:t,message:n,msg:a}=e;return t?(oe(t.status),Promise.resolve(t.data)):"cancel"!==n&&"cancel"!==a?Promise.reject({msg:"网络错误"}):void 0}));var ue=le;const ce="https://itunes.apple.com/",pe={getData(e){return ue.get(`${ce}hk/lookup?id=${e}`)},topgrossingapplications(e){return ue.get(`${ce}hk/rss/topgrossingapplications/limit=${e}/json`)},topfreeapplications(e){return ue.get(`${ce}hk/rss/topfreeapplications/limit=${e}/json`)}};var de=pe;const me=(0,a.ri)(u);me.config.globalProperties.$api=de,ie.install(me),me.use(q).use(B).mount("#app")}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,r){if(!a){var s=1/0;for(c=0;c<e.length;c++){a=e[c][0],i=e[c][1],r=e[c][2];for(var o=!0,l=0;l<a.length;l++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(o=!1,r<s&&(s=r));if(o){e.splice(c--,1);var u=i();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,i,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,r,s=a[0],o=a[1],l=a[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)var c=l(n)}for(t&&t(a);u<s.length;u++)r=s[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},a=self["webpackChunkvue_ts_app"]=self["webpackChunkvue_ts_app"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(3836)}));a=n.O(a)})();